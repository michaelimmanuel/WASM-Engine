<!DOCTYPE html>
<html>
<head>
    <title>WASM Physics Engine Demo</title>
</head>
<body>
    <h1>Physics Engine Demo</h1>
    <div id="output"></div>

    <script type="module">
        import init, { World } from "./pkg/wasm_engine.js";

        async function run() {
            await init();

            // Create a new physics world
            const world = new World();

            // Create a body with mass 1.0 at position (0, 0)
            const bodyIndex = world.create_body(1.0, 0.0, 0.0);

            console.log(`Created body at index: ${bodyIndex}`);
            console.log(`Total bodies: ${world.bodies_count()}`);

            // Get initial position
            let x = world.get_body_position_x(bodyIndex);
            let y = world.get_body_position_y(bodyIndex);
            console.log(`Initial position: (${x}, ${y})`);

            // Step the simulation for 1 second
            world.step(1.0);

            // Get new position (should have fallen due to gravity)
            x = world.get_body_position_x(bodyIndex);
            y = world.get_body_position_y(bodyIndex);
            console.log(`After 1 second: (${x}, ${y})`);

            // Update the HTML output
            const output = document.getElementById('output');
            output.innerHTML = `
                <p>Initial position: (0, 0)</p>
                <p>After 1 second with gravity: (${x.toFixed(2)}, ${y.toFixed(2)})</p>
                <p>The body has fallen due to gravity (9.81 m/sÂ²)!</p>
            `;
        }

        run();
    </script>
</body>
</html>
